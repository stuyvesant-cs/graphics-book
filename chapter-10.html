<!DOCTYPE html>
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<html lang="en-US" dir="ltr">
<head xmlns:og="http://ogp.me/ns#" xmlns:book="https://ogp.me/ns/book#">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Scanline Conversion</title>
<meta name="Keywords" content="Authored in PreTeXt">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:type" content="book">
<meta property="book:title" content="Computer Graphics">
<meta property="book:author" content="JonAlf Dyrland-Weaver">
<script>
var runestoneMathReady = new Promise((resolve) => window.rsMathReady = resolve);
window.MathJax = {
  "tex": {
    "inlineMath": [
      [
        "\\(",
        "\\)"
      ]
    ],
    "tags": "none",
    "tagSide": "right",
    "tagIndent": ".8em",
    "packages": {
      "[+]": [
        "base",
        "extpfeil",
        "ams",
        "amscd",
        "color",
        "newcommand",
        "knowl"
      ]
    }
  },
  "options": {
    "ignoreHtmlClass": "tex2jax_ignore|ignore-math",
    "processHtmlClass": "process-math"
  },
  "chtml": {
    "scale": 0.98,
    "mtextInheritFont": true
  },
  "loader": {
    "load": [
      "input/asciimath",
      "[tex]/extpfeil",
      "[tex]/amscd",
      "[tex]/color",
      "[tex]/newcommand",
      "[pretext]/mathjaxknowl3.js"
    ],
    "paths": {
      "pretext": "https://pretextbook.org/js/lib"
    }
  },
  "startup": {
    pageReady() {
      return MathJax.startup.defaultPageReady().then(function () {
      console.log("in ready function");
      rsMathReady();
      }
    )}
  }
};
</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js" integrity="sha512-4xUl/d6D6THrAnXAwGajXkoWaeMNwEKK4iNfq5DotEbLPAfk6FSxSP3ydNxqDgCw1c/0Z1Jg6L8h2j+++9BZmg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="lunr-pretext-search-index.js" async=""></script><script src="https://pretextbook.org/js/0.32/pretext_search.js"></script><link href="https://pretextbook.org/css/0.82/pretext_search.css" rel="stylesheet" type="text/css">
<script>js_version = 0.32</script><script src="https://pretextbook.org/js/lib/jquery.min.js"></script><script src="https://pretextbook.org/js/lib/jquery.sticky.js"></script><script src="https://pretextbook.org/js/lib/jquery.espy.min.js"></script><script src="https://pretextbook.org/js/0.32/pretext.js"></script><script>miniversion=0.1</script><script src="https://pretextbook.org/js/0.32/pretext_add_on.js?x=1"></script><script src="https://pretextbook.org/js/0.32/user_preferences.js"></script><script src="https://pretextbook.org/js/lib/knowl.js"></script><!--knowl.js code controls Sage Cells within knowls--><script>sagecellEvalName='Evaluate (Sage)';
</script><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&amp;family=Noto+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;family=Tinos:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet">
<link href="https://fonts.cdnfonts.com/css/dejavu-serif" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:opsz,wdth,wght@8..144,50..150,100..900&amp;display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wdth,wght@75..100,300..800&amp;display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
<link href="https://pretextbook.org/css/0.82/pretext.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.82/pretext_add_on.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.82/shell_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.82/banner_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.82/navbar_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.82/toc_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.82/knowls_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.82/style_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.82/colors_blue_red.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.82/setcolors.css" rel="stylesheet" type="text/css">
</head>
<body class="pretext book ignore-math">
<a class="assistive" href="#ptx-content">Skip to main content</a><header id="ptx-masthead" class="ptx-masthead"><div class="ptx-banner">
<a id="logo-link" class="logo-link" target="_blank" href=""></a><div class="title-container">
<h1 class="heading"><a href="stuy-gfx.html"><span class="title">Computer Graphics:</span> <span class="subtitle">A Language Agnostic Guide to Fakin’ It</span></a></h1>
<p class="byline">JonAlf Dyrland-Weaver</p>
</div>
</div></header><nav id="ptx-navbar" class="ptx-navbar navbar"><button class="toc-toggle button" title="Contents"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5d2;</span><span class="name">Contents</span></button><div class="searchbox">
<div class="searchwidget"><button id="searchbutton" class="searchbutton button" type="button" title="Search book"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe8b6;</span><span class="name">Search Book</span></button></div>
<div id="searchresultsplaceholder" class="searchresultsplaceholder" style="display: none">
<div class="search-results-controls">
<input aria-label="Search term" id="ptxsearch" class="ptxsearch" type="text" name="terms" placeholder="Search term"><button title="Close search" id="closesearchresults" class="closesearchresults"><span class="material-symbols-outlined">close</span></button>
</div>
<h2 class="search-results-heading">Search Results: </h2>
<div id="searchempty" class="searchempty"><span>No results.</span></div>
<ol id="searchresults" class="searchresults"></ol>
</div>
</div>
<span class="nav-other-controls"></span><span class="treebuttons"><a class="previous-button button" href="part-4.html" title="Previous"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5cb;</span><span class="name">Prev</span></a><a class="up-button button" href="part-4.html" title="Up"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5ce;</span><span class="name">Up</span></a><a class="next-button button" href="chapter-11.html" title="Next"><span class="name">Next</span><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5cc;</span></a></span></nav><div id="latex-macros" class="hidden-content process-math" style="display:none"><span class="process-math">\(\newcommand{\R}{\mathbb R}
\newcommand{\lt}{&lt;}
\newcommand{\gt}{&gt;}
\newcommand{\amp}{&amp;}
\definecolor{fillinmathshade}{gray}{0.9}
\newcommand{\fillinmath}[1]{\mathchoice{\colorbox{fillinmathshade}{$\displaystyle     \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\textstyle        \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptstyle      \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptscriptstyle\phantom{\,#1\,}$}}}
\)</span></div>
<div class="ptx-page">
<div id="ptx-sidebar" class="ptx-sidebar"><nav id="ptx-toc" class="ptx-toc depth2 parts"><ul class="structural contains-active toc-item-list">
<li class="toc-item toc-frontmatter"><div class="toc-title-box"><a href="frontmatter.html" class="internal"><span class="title">Front Matter</span></a></div></li>
<li class="toc-item toc-part">
<div class="toc-title-box"><a href="part-1.html" class="internal"><span class="codenumber">I</span> <span class="title">2-D structures</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="chapter-1.html" class="internal"><span class="codenumber">1</span> <span class="title">Colors, Depth, Space (and Time?)</span></a></div>
<ul class="structural toc-item-list"><li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-1.html#section-1" class="internal"><span class="codenumber">1.1</span> <span class="title">Image File Formats</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-1.html#subsection-1" class="internal"><span class="codenumber">1.1.1</span> <span class="title">Vector Formats</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-1.html#subsection-2" class="internal"><span class="codenumber">1.1.2</span> <span class="title">Raster Formats</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-1.html#subsection-3" class="internal"><span class="codenumber">1.1.3</span> <span class="title">NetPBM File Formats</span></a></div></li>
</ul>
</li></ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="chapter-2.html" class="internal"><span class="codenumber">2</span> <span class="title">Bresenham’s Line Algorithm</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-2.html#section-2" class="internal"><span class="codenumber">2.1</span> <span class="title">The Problem</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-2.html#section-3" class="internal"><span class="codenumber">2.2</span> <span class="title">Testing Potential Points</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-2.html#section-4" class="internal"><span class="codenumber">2.3</span> <span class="title">Developing the Algorithm</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-2.html#subsection-4" class="internal"><span class="codenumber">2.3.1</span> <span class="title">Round I: Testing Both Points</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-2.html#subsection-5" class="internal"><span class="codenumber">2.3.2</span> <span class="title">Round II: Testing the Midpoint</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-2.html#subsection-6" class="internal"><span class="codenumber">2.3.3</span> <span class="title">The Testing Function</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-2.html#subsection-7" class="internal"><span class="codenumber">2.3.4</span> <span class="title">Round III: Testing No Points!</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="chapter-3.html" class="internal"><span class="codenumber">3</span> <span class="title">Edge Lists &amp; Matricies</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-3.html#section-5" class="internal"><span class="codenumber">3.1</span> <span class="title">Using Edge Lists</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-3.html#section-6" class="internal"><span class="codenumber">3.2</span> <span class="title">Matrix Math for Graphics</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-3.html#subsection-8" class="internal"><span class="codenumber">3.2.1</span> <span class="title">Matrix Multiplication</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-3.html#subsection-9" class="internal"><span class="codenumber">3.2.2</span> <span class="title">Multiplicative Identity</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="chapter-4.html" class="internal"><span class="codenumber">4</span> <span class="title">Transformations</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-4.html#section-7" class="internal"><span class="codenumber">4.1</span> <span class="title">Transformation Matrices</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-4.html#subsection-10" class="internal"><span class="codenumber">4.1.1</span> <span class="title">Translation</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-4.html#subsection-11" class="internal"><span class="codenumber">4.1.2</span> <span class="title">Dilation</span></a></div></li>
<li class="toc-item toc-subsection">
<div class="toc-title-box"><a href="chapter-4.html#subsection-12" class="internal"><span class="codenumber">4.1.3</span> <span class="title">Rotation</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsubsection"><div class="toc-title-box"><a href="chapter-4.html#subsubsection-1" class="internal"><span class="codenumber">4.1.3.1</span> <span class="title">Z-Axis Rotation</span></a></div></li>
<li class="toc-item toc-subsubsection"><div class="toc-title-box"><a href="chapter-4.html#subsubsection-2" class="internal"><span class="codenumber">4.1.3.2</span> <span class="title">X-Axis Rotation</span></a></div></li>
<li class="toc-item toc-subsubsection"><div class="toc-title-box"><a href="chapter-4.html#subsubsection-3" class="internal"><span class="codenumber">4.1.3.3</span> <span class="title">Y-Axis Rotation</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-4.html#section-8" class="internal"><span class="codenumber">4.2</span> <span class="title">Combining Transformations</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="chapter-5.html" class="internal"><span class="codenumber">5</span> <span class="title">Parametric Equations &amp; Curves</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-5.html#section-9" class="internal"><span class="codenumber">5.1</span> <span class="title">Parametric Equations</span></a></div>
<ul class="structural toc-item-list"><li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-5.html#subsection-13" class="internal"><span class="codenumber">5.1.1</span> <span class="title">Parametric Circle</span></a></div></li></ul>
</li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-5.html#section-10" class="internal"><span class="codenumber">5.2</span> <span class="title">Splines</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-5.html#subsection-14" class="internal"><span class="codenumber">5.2.1</span> <span class="title">Hermite Curves</span></a></div></li>
<li class="toc-item toc-subsection">
<div class="toc-title-box"><a href="chapter-5.html#subsection-15" class="internal"><span class="codenumber">5.2.2</span> <span class="title">Bezier Curves</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsubsection"><div class="toc-title-box"><a href="chapter-5.html#subsubsection-4" class="internal"><span class="codenumber">5.2.2.1</span> <span class="title">Bezier Line</span></a></div></li>
<li class="toc-item toc-subsubsection"><div class="toc-title-box"><a href="chapter-5.html#subsubsection-5" class="internal"><span class="codenumber">5.2.2.2</span> <span class="title">Bezier Quadratic</span></a></div></li>
<li class="toc-item toc-subsubsection"><div class="toc-title-box"><a href="chapter-5.html#subsubsection-6" class="internal"><span class="codenumber">5.2.2.3</span> <span class="title">Bezier Cubic</span></a></div></li>
<li class="toc-item toc-subsubsection"><div class="toc-title-box"><a href="chapter-5.html#subsubsection-7" class="internal"><span class="codenumber">5.2.2.4</span> <span class="title">Bezier Implementation</span></a></div></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-part">
<div class="toc-title-box"><a href="part-2.html" class="internal"><span class="codenumber">II</span> <span class="title">3-D Structures</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="chapter-6.html" class="internal"><span class="codenumber">6</span> <span class="title">3D Shapes</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-6.html#section-11" class="internal"><span class="codenumber">6.1</span> <span class="title">Box</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-6.html#section-12" class="internal"><span class="codenumber">6.2</span> <span class="title">Sphere</span></a></div>
<ul class="structural toc-item-list"><li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-6.html#subsection-16" class="internal"><span class="codenumber">6.2.1</span> <span class="title">Sphere Point Generation</span></a></div></li></ul>
</li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-6.html#section-13" class="internal"><span class="codenumber">6.3</span> <span class="title">Torus</span></a></div>
<ul class="structural toc-item-list"><li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-6.html#subsection-17" class="internal"><span class="codenumber">6.3.1</span> <span class="title">Torus Point Generation</span></a></div></li></ul>
</li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-6.html#section-14" class="internal"><span class="codenumber">6.4</span> <span class="title">Implementing 3D Shapes</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="chapter-7.html" class="internal"><span class="codenumber">7</span> <span class="title">Polygons</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-7.html#section-15" class="internal"><span class="codenumber">7.1</span> <span class="title">Polygon Lists</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-7.html#section-16" class="internal"><span class="codenumber">7.2</span> <span class="title">Polygon Based Shapes</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-7.html#subsection-18" class="internal"><span class="codenumber">7.2.1</span> <span class="title">Box</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-7.html#subsection-19" class="internal"><span class="codenumber">7.2.2</span> <span class="title">Sphere</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-7.html#subsection-20" class="internal"><span class="codenumber">7.2.3</span> <span class="title">Torus</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-7.html#section-17" class="internal"><span class="codenumber">7.3</span> <span class="title">Vectors</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-7.html#section-18" class="internal"><span class="codenumber">7.4</span> <span class="title">Backface Culling</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-7.html#subsection-21" class="internal"><span class="codenumber">7.4.1</span> <span class="title">Calculate <span class="process-math">\(\overrightarrow{N}\)</span></span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-7.html#subsection-22" class="internal"><span class="codenumber">7.4.2</span> <span class="title">Calculate <span class="process-math">\(\theta\)</span></span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-7.html#subsection-23" class="internal"><span class="codenumber">7.4.3</span> <span class="title">Putting it all together</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="chapter-8.html" class="internal"><span class="codenumber">8</span> <span class="title">Backface Culling</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-8.html#section-19" class="internal"><span class="codenumber">8.1</span> <span class="title">Vectors</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-8.html#section-20" class="internal"><span class="codenumber">8.2</span> <span class="title">The Algorithm</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-8.html#subsection-24" class="internal"><span class="codenumber">8.2.1</span> <span class="title">Calculate <span class="process-math">\(\overrightarrow{N}\)</span></span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-8.html#subsection-25" class="internal"><span class="codenumber">8.2.2</span> <span class="title">Calculate <span class="process-math">\(\theta\)</span></span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-8.html#subsection-26" class="internal"><span class="codenumber">8.2.3</span> <span class="title">Putting it all together</span></a></div></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-part">
<div class="toc-title-box"><a href="part-3.html" class="internal"><span class="codenumber">III</span> <span class="title">Motion</span></a></div>
<ul class="structural toc-item-list"><li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="chapter-9.html" class="internal"><span class="codenumber">9</span> <span class="title">Relative Coordinate Systems</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-9.html#section-21" class="internal"><span class="codenumber">9.1</span> <span class="title">The Global Coordinate System</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-9.html#section-22" class="internal"><span class="codenumber">9.2</span> <span class="title">Relative Coordinate Systems: In Theory</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-9.html#section-23" class="internal"><span class="codenumber">9.3</span> <span class="title">In Practice</span></a></div></li>
</ul>
</li></ul>
</li>
<li class="toc-item toc-part contains-active">
<div class="toc-title-box"><a href="part-4.html" class="internal"><span class="codenumber">IV</span> <span class="title">Lighting &amp; Shading</span></a></div>
<ul class="structural toc-item-list contains-active">
<li class="toc-item toc-chapter active">
<div class="toc-title-box"><a href="chapter-10.html" class="internal"><span class="codenumber">10</span> <span class="title">Scanline Conversion</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-10.html#section-24" class="internal"><span class="codenumber">10.1</span> <span class="title">Overview</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-10.html#section-25" class="internal"><span class="codenumber">10.2</span> <span class="title">Scanlines</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-10.html#subsection-27" class="internal"><span class="codenumber">10.2.1</span> <span class="title">Calculating <span class="process-math">\(x_0\)</span></span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-10.html#subsection-28" class="internal"><span class="codenumber">10.2.2</span> <span class="title">Calculating <span class="process-math">\(x_1\)</span></span></a></div></li>
</ul>
</li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-10.html#section-26" class="internal"><span class="codenumber">10.3</span> <span class="title">The Algorithm</span></a></div>
<ul class="structural toc-item-list"><li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-10.html#subsection-29" class="internal"><span class="codenumber">10.3.1</span> <span class="title">"Special" Triangles</span></a></div></li></ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="chapter-11.html" class="internal"><span class="codenumber">11</span> <span class="title">Z Buffering</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-11.html#section-27" class="internal"><span class="codenumber">11.1</span> <span class="title">The Z-Buffer</span></a></div></li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-11.html#section-28" class="internal"><span class="codenumber">11.2</span> <span class="title">Calculating <span class="process-math">\(z\)</span> Values</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-11.html#subsection-30" class="internal"><span class="codenumber">11.2.1</span> <span class="title"><code class="code-inline tex2jax_ignore">scanline_convert</code></span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-11.html#subsection-31" class="internal"><span class="codenumber">11.2.2</span> <span class="title"><code class="code-inline tex2jax_ignore">draw_line</code> and <code class="code-inline tex2jax_ignore">draw_scanline</code></span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="chapter-12.html" class="internal"><span class="codenumber">12</span> <span class="title">Lighting Models</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-12.html#section-29" class="internal"><span class="codenumber">12.1</span> <span class="title">Light Sources</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-12.html#subsection-32" class="internal"><span class="codenumber">12.1.1</span> <span class="title">Ambient Light</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-12.html#subsection-33" class="internal"><span class="codenumber">12.1.2</span> <span class="title">Point Light Sources</span></a></div></li>
</ul>
</li>
<li class="toc-item toc-section">
<div class="toc-title-box"><a href="chapter-12.html#section-30" class="internal"><span class="codenumber">12.2</span> <span class="title">Reflection Types</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-12.html#subsection-34" class="internal"><span class="codenumber">12.2.1</span> <span class="title">Ambient Reflection</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-12.html#subsection-35" class="internal"><span class="codenumber">12.2.2</span> <span class="title">Diffuse Reflection</span></a></div></li>
<li class="toc-item toc-subsection"><div class="toc-title-box"><a href="chapter-12.html#subsection-36" class="internal"><span class="codenumber">12.2.3</span> <span class="title">Specular Reflection</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-chapter">
<div class="toc-title-box"><a href="chapter-13.html" class="internal"><span class="codenumber">13</span> <span class="title">Phong Reflection Models</span></a></div>
<ul class="structural toc-item-list">
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-13.html#section-31" class="internal"><span class="codenumber">13.1</span> <span class="title">Overview</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-13.html#section-32" class="internal"><span class="codenumber">13.2</span> <span class="title">Ambient Reflection</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-13.html#section-33" class="internal"><span class="codenumber">13.3</span> <span class="title">Diffuse Reflection</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-13.html#section-34" class="internal"><span class="codenumber">13.4</span> <span class="title">Specular Reflection</span></a></div></li>
<li class="toc-item toc-section"><div class="toc-title-box"><a href="chapter-13.html#section-35" class="internal"><span class="codenumber">13.5</span> <span class="title">Putting it All Together</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toc-item toc-backmatter"><div class="toc-title-box"><a href="backmatter.html" class="internal"><span class="title">Backmatter</span></a></div></li>
</ul></nav></div>
<main class="ptx-main"><div id="ptx-content" class="ptx-content"><section class="chapter" id="chapter-10"><h2 class="heading">
<span class="type">Chapter</span><span class="space"> </span><span class="codenumber">10</span><span class="space"> </span><span class="title">Scanline Conversion</span>
</h2>
<section class="introduction" id="introduction-8">Now that we have moved to a polygon based drawing engine (for 3D objects at least), we can realistically talk about filling in the polygons to make our shapes appear solid, instead of meshes. Filling in each polygon means that our engine needs to plot every single pixel on the surface of each object being drawn (this is were backface culling starts to pay off, since we are already ignoring any non-visible faces). Because this is so exhaustive, we’re going to need to make sure we’re doing our best to minimalize the amount of work our engine does to fill in the polygons. This is where scanline conversion comes in.</section><section class="section" id="section-24"><h3 class="heading hide-type">
<span class="type">Section</span><span class="space"> </span><span class="codenumber">10.1</span><span class="space"> </span><span class="title">Overview</span>
</h3>
<div class="para logical" id="p-102">
<div class="para">Scanline conversion is the process of filling in a polygon by drawing a series of horizontal (or vertical) lines covering the entire surface of the polygon. This has a number of advantages over other possible approaches such as:</div>
<ul class="disc">
<li id="li-102"><div class="para" id="p-derived-li-102">The y value for each scanline is just 1 plus the previous y value.</div></li>
<li id="li-103"><div class="para" id="p-derived-li-103">Horizontal lines have the same y value for each pixel, negating the need for y calculations inside the line algorithm.</div></li>
<li id="li-104"><div class="para" id="p-derived-li-104">We can cover the entire surface while only visiting each pixel exactly <em class="emphasis">once</em>
</div></li>
</ul>
</div>
<div class="para" id="p-103">In order to scanline convert a triangle, the first thing we have to do is find the top, bottom and middle vertices. As long as each triangle in our triangle matrix has 3 distinct vertices, there will always <em class="emphasis">at least</em> be a distinct top and bottom (this is why it was important not to add the degenerate triangles at the poles of a sphere). We can define the middle as the vertex that isn’t either the top or bottom (more on this later). After ordering our vertices vertically, we have something like this: <div class="image-box" style="width: 100%; margin-left: 0%; margin-right: 0%;"><img src="external/images/ch09-scanline-triangle.png" class="contained" alt="A triangle with vertices labeled Bottom, Top, and Middle."></div>
</div></section><section class="section" id="section-25"><h3 class="heading hide-type">
<span class="type">Section</span><span class="space"> </span><span class="codenumber">10.2</span><span class="space"> </span><span class="title">Scanlines</span>
</h3>
<div class="para" id="p-104">Each scanline will go from one edge of the triangle to another. In order to draw each line, we have to determine the endpoints. <span class="process-math">\(y\)</span> values are very simple. They start at the bottom (<span class="process-math">\(y_b\)</span>), go up by 1 each time, and end at the top (<span class="process-math">\(y_t\)</span>). The <span class="process-math">\(x\)</span> values are more complicated. They must move along the edges of the triangle. In the diagram above, I’ve designated that <span class="process-math">\(x_0\)</span> for each scanline to be the endpoint somewhere along the line <span class="process-math">\(\overline{BT}\text{,}\)</span> and <span class="process-math">\(x_1\)</span> will be the other endpoint, which will either be along <span class="process-math">\(\overline{BM}\)</span> or <span class="process-math">\(\overline{MT}\text{,}\)</span> depending on how far up we’ve made it. It doesn’t matter if the middle vertex is to the left of right of the <span class="process-math">\(\overline{BT}\)</span> edge, since our <code class="code-inline tex2jax_ignore">draw_line</code> function will swap endpoints if they’re not listed left to right. This will make it easier to develop the scanline algorithm.</div>
<section class="subsection" id="subsection-27"><h4 class="heading hide-type">
<span class="type">Subsection</span><span class="space"> </span><span class="codenumber">10.2.1</span><span class="space"> </span><span class="title">Calculating <span class="process-math">\(x_0\)</span></span>
</h4>
<div class="para logical" id="p-105">
<div class="para">
<span class="process-math">\(x_0\)</span> starts at <span class="process-math">\(x_b\)</span> and ends at <span class="process-math">\(x_t\text{.}\)</span> The question is, how much does <span class="process-math">\(x_0\)</span> change with each scanline (<span class="process-math">\(\Delta x_0\)</span>)? The total change in <span class="process-math">\(x_0\)</span> is <span class="process-math">\(x_t - x_b\text{,}\)</span> which occurs over the course of drawing each scanline. So the number of scanlines determines the number of times we change <span class="process-math">\(x_0\text{.}\)</span> In turn, the number of scanlines is just the difference in <span class="process-math">\(y\)</span> over the course of the triangle.</div>
<div class="displaymath process-math">
\begin{equation*}
\Delta x_0 = \frac{x_t - x_b}{y_t - y_b + 1}
\end{equation*}
</div>
<div class="para">(we need to add 1 to the y difference to account for the bottom-most line).</div>
</div></section><section class="subsection" id="subsection-28"><h4 class="heading hide-type">
<span class="type">Subsection</span><span class="space"> </span><span class="codenumber">10.2.2</span><span class="space"> </span><span class="title">Calculating <span class="process-math">\(x_1\)</span></span>
</h4>
<div class="para logical" id="p-106">
<div class="para">
<span class="process-math">\(x_1\)</span> also starts at <span class="process-math">\(x_b\text{,}\)</span> but it ends at <span class="process-math">\(x_m\)</span> and then changes direction to go towards <span class="process-math">\(x_t\text{.}\)</span> We need to calculate <span class="process-math">\(\Delta x_1\)</span> similarly to how we calcluated <span class="process-math">\(x_0\text{,}\)</span> but we will have 2 different values, depending on whether we’ve moved past the middle vertex or not.</div>
<div class="displaymath process-math">
\begin{equation*}
\begin{aligned}
\Delta x_1 = \frac{x_m - x_b}{y_m - y_b + 1} \\
\Delta x_1 = \frac{x_t - x_m}{y_t - y_m + 1}
\end{aligned}\text{.}
\end{equation*}
</div>
<div class="para">We flip from the first to the second calculation once our <span class="process-math">\(y\)</span> has reached <span class="process-math">\(y_m\text{.}\)</span>
</div>
</div></section></section><section class="section" id="section-26"><h3 class="heading hide-type">
<span class="type">Section</span><span class="space"> </span><span class="codenumber">10.3</span><span class="space"> </span><span class="title">The Algorithm</span>
</h3>
<div class="para logical" id="p-107">
<div class="para">Putting this all together, we can come up with this pseudocode outline:</div>
<pre class="code-display tex2jax_ignore">
        //initial setup, find b, t, m
        x0 = xb, x1 = xb, y0 = yb
        dx0 = (xt - xb) / (yt - yb)
        dx1 = (xm - xb) / (ym - yb)
        dx1_1 = (xt - xm) / (yt - ym)
        while y &lt;= yt
            draw_line(x0, y, x1, y)
            //move the endpoints
            x0+= dx0
            x1+= dx1
            y+= 1
            //swap dx1 if neeced
            if y &gt;= ym
                dx1 = dx1_1
                x1 = xm
      </pre>
<div class="para">It is a good idea to think of the loop here as having 3 distinct parts:</div>
<ol class="decimal">
<li id="li-105"><div class="para" id="p-derived-li-105">drawing the line</div></li>
<li id="li-106"><div class="para" id="p-derived-li-106">updating the endpoints</div></li>
<li id="li-107"><div class="para" id="p-derived-li-107">swapping <span class="process-math">\(\Delta x_1\)</span>
</div></li>
</ol>
<div class="para">The order in which you do these may not match the outline above, depending on how you handle "special" cases and other potential issues as they arise.</div>
</div>
<section class="subsection" id="subsection-29"><h4 class="heading hide-type">
<span class="type">Subsection</span><span class="space"> </span><span class="codenumber">10.3.1</span><span class="space"> </span><span class="title">"Special" Triangles</span>
</h4>
<div class="para" id="p-108">Scanline conversion works very well when there are distinct top, bottom and middle vertices. Sometimes, there is no distinct middle (once again, there will always be a top and bottom). These are cases when two vertices have the same <span class="process-math">\(y\)</span> value (either the top or bottom is a flat horizontal line). <em class="emphasis">But</em> the <span class="process-math">\(x\)</span> values will be different, which is important. You can handle these cases either explicitly or implicitly, but you do need to consider them.</div></section></section></section></div>
<div class="ptx-content-footer">
<a class="previous-button button" href="part-4.html" title="Previous"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5cb;</span><span class="name">Prev</span></a><a class="top-button button" href="#" title="Top"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5ce;</span><span class="name">Top</span></a><a class="next-button button" href="chapter-11.html" title="Next"><span class="name">Next</span><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5cc;</span></a>
</div></main>
</div>
<div id="ptx-page-footer" class="ptx-page-footer">
<a class="pretext-link" href="https://pretextbook.org" title="PreTeXt"><div class="logo"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="338 3000 8772 6866"><g style="stroke-width:.025in; stroke:black; fill:none"><polyline points="472,3590 472,9732 " style="stroke:#000000;stroke-width:174; stroke-linejoin:miter; stroke-linecap:round; "></polyline><path style="stroke:#000000;stroke-width:126;stroke-linecap:butt;" d="M 4724,9448 A 4660 4660  0  0  1  8598  9259"></path><path style="stroke:#000000;stroke-width:174;stroke-linecap:butt;" d="M 4488,9685 A 4228 4228  0  0  0   472  9732"></path><path style="stroke:#000000;stroke-width:126;stroke-linecap:butt;" d="M 4724,3590 A 4241 4241  0  0  1  8598  3496"></path><path style="stroke:#000000;stroke-width:126;stroke-linecap:round;" d="M 850,3496  A 4241 4241  0  0  1  4724  3590"></path><path style="stroke:#000000;stroke-width:126;stroke-linecap:round;" d="M 850,9259  A 4507 4507  0  0  1  4724  9448"></path><polyline points="5385,4299 4062,8125" style="stroke:#000000;stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="8598,3496 8598,9259" style="stroke:#000000;stroke-width:126; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="850,3496 850,9259" style="stroke:#000000;stroke-width:126; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="4960,9685 4488,9685" style="stroke:#000000;stroke-width:174; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="3070,4582 1889,6141 3070,7700" style="stroke:#000000;stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="6418,4582 7600,6141 6418,7700" style="stroke:#000000;stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="8976,3590 8976,9732" style="stroke:#000000;stroke-width:174; stroke-linejoin:miter; stroke-linecap:round;"></polyline><path style="stroke:#000000;stroke-width:174;stroke-linecap:butt;" d="M 4960,9685 A 4228 4228  0  0  1  8976  9732"></path></g></svg></div></a><a class="runestone-link" href="https://runestone.academy" title="Runestone Academy"><img class="logo" src="https://runestone.academy/runestone/static/images/RAIcon_cropped.png"></a><a class="mathjax-link" href="https://www.mathjax.org" title="MathJax"><img class="logo" src="https://www.mathjax.org/badge/badge-square-2.png"></a>
</div>
</body>
</html>
